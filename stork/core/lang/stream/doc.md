# lang.stream.* #

### Data ###

Stream has 2 constructors: `some(head)(tail)`, `none`.

Stream represents an ordered collection of elements. Stream can be a node that contains an element (`head`) and a reference to another node (`tail`), or it can be empty (`none`).

Stream can be created by manually linking nodes. Example of fixed sized streams would be:
 - `some(1)(none)` - stream of: `1`
 - `some(1)(some(2)(none))` - stream of: `1`, `2`
 - `some(1)(some(2)(some(3)(none)))` - stream of: `1`, `2`, `3`

Stream can be finite or infinite. Finite stream (like examples above) terminates with a node that references an empty stream (`none`) as its tail. Some operations on infinite stream are not possible. For example calling `length` on infinite stream hangs the program.

Stream is similar to singly linked list. This means accessing random element is not constant-time operation since accessing an element requires iterating through all elements ahead of it.

### Functions ###

`hasSome(stream)` - returns `true` if stream is not empty
   - `hasSome(some(head)(tail))` = `true`
   - `hasSome(none)` = `false`

`hasNone(stream)` - returns `true` if stream is empty
   - `hasNone(some(head)(tail))` = `false`
   - `hasNone(none)` = `true`


`maybeHead(stream)` - returns `something(head)` or `nothing` if stream is `none`.
   - `maybeHead("abcde")` = `something(97)`
   - `maybeHead("")` = `nothing`

`maybeTail(stream)` - returns `something(tail)` or `nothing` if stream is `none`.
   - `maybeTail("abcde")` = `something("bcde")`
   - `maybeTail("")` = `nothing`

##### creating #####

`single(element)` - creates stream of length 1, containing only `element`.

`repeat(element)` - creates an infinite stream of which every element is `element`.

`cycle(stream)` - creates an infinite stream. It is a concatenation of infinite number of copies of `stream`. If `stream` is empty, then result is also an empty stream. If `stream` is already infinite, then result is effectively the same `stream`.

`iterate(next)(first)` - generates an infinite stream. First element is `first`. Next element is generated by applying function `next` on previous element.
   - `iterate(add(2))(1)` - generates stream of all positive odd integers 

##### processing #####

`each(transform)(stream)` - goes through all elements in `stream` and replaces each of them by applying `transform` function.
   - `each(add(1))("ace")` = `"bdf"`

`reduce(seed)(accumulator)(stream)` - goes through all elements in `stream` and invokes a 2 parameter function `accumulator` on each element. First parameter of `accumulator` is element from `stream`. Second argument is `seed` with elements previously accumulated. It is similar to `foldl` and `foldr` in haskell. `reduce` goes through `stream` starting from first element like `foldl`, but element from stream is the first argument to `accumulator` like in `foldr`. Reducing an infinite stream hangs the program.
   - `reduce(1)(multiply)(some(2)(some(3)(some(5)(none))))` = `30`
   - `reduce(1)(multiply)(none)` = `1`

`filter(predicate)(stream)` - returns a stream containing only those elements from `stream` that match given `predicate`.
   - `filter(isDigit)("a1b2c3")` = `"123"`

`limit(n)(stream)` - shortens `stream` to maximum of `n` elements. If length of `stream` is equal or less than `n`, it returns the same `stream`. If `n` is negative, it returns an empty stream.
   - `limit(2)("abcde")` = `"ab"`
   - `limit(5)("abcde")` = `"abcde"`
   - `limit(7)("abcde")` = `"abcde"`
   - `limit(0)("abcde")` = `""`
   - `limit(-1)("abcde")` = `""`

`skip(n)(stream)` - removes `n` elements from beginning of `stream`. If `n` is greater than length of `stream`, it returns an empty stream. If `n` is negative, it returns the same `stream`.
   - `skip(2)("abcde")` = `"cde"`
   - `skip(5)("abcde")` = `""`
   - `skip(7)("abcde")` = `""`
   - `skip(0)("abcde")` = `"abcde"`
   - `skip(-1)("abcde")` = `"abcde"`

`while(predicate)(stream)` - preserves elements from `stream` up to a point where element from `stream` does not match `predicate`. First element that does not match predicate is removed altogether with all elements behind.
   - `while(isDigit)("123x456x789")` = `"123"`
   - `while(isDigit)("x123")` - > `"" `
   - `while(isDigit)("")` = `""`

`until(predicate)(stream)` - preserves elements from `stream` up to a point where first element from `stream` matches `predicate`. First element that matches predicate will be the last one in returned stream.
   - `until(isDigit)("abcd3efg")` = `"abcd3"`
   - `until(isDigit)("3abc")` - > `"" `
   - `until(isDigit)("")` = `""`

`unamybe(maybes)` - takes stream of `maybes` [lang.stream.maybe](../maybe/doc.md). First it removes all `nothing` elements from the `maybes` stream. Then it unpacks elements wrapped in `something`.

##### more than one stream #####

`append(secondStream)(stream)` - appends elements from `secondStream` to the end of `stream`.
   - `append("xyz")("abc")` = `"abcxyz"`

`prepend(secondStream)(stream)` - prepends `stream` with elements from `secondStream`.
   - `prepend("xyz")("abc")` = `"xyzabc"`

`flatten(streams)` - converts 2-dimensional stream of streams into 1-dimensional stream by concatenating all `streams` in same order.
   - `flatten(some("abc")(some("def")(some("ghi")(none))))` = `"abcdefghi"`

`transpose(streams)` - takes 2-dimensional stream of streams and flips dimensions. All `streams` can be of different length and infinite as well.

`equal(equalElements)(streamA)(streamB)` - returns true if `streamA` and `streamB` contain the same elements in the same order. `equalElements` function is used to compare elements. It takes 2 parameters and returns boolean. It is intended to use with finite streams since infinite streams that are equal would hang the program.
   - `equal(equalInteger)("abc")("abc")` = `true`
   - `equal(equalInteger)("abc")("abx")` = `false`
   - `equal(equalInteger)("abc")("ab")` = `false`

`startsWith(equal)(prefix)(stream)` - checks if `stream` starts with `prefix` stream. Function `equal` is used to compare elements in those streams.
   - `startsWith(equalInteger)("a")("abc")` = `true`
   - `startsWith(equalInteger)("a")("a")` = `true`
   - `startsWith(equalInteger)("a")("xyz")` = `false`
   - `startsWith(equalInteger)("abc")("a")` = `false`
   - `startsWith(equalInteger)("")("abc")` = `true`

##### other #####

`length(stream)` - returns number of elements in `stream`.
   - `length("abc")` = `3`
   - `length("")` = `0`


`contains(predicate)(stream)` - checks if `stream` has any element that matches `predicate`.
   - `contains(isDigit)("ab8cd")` = `true`
   - `contains(isDigit)("abcd")` = `false`

`reverse(stream)` - reorders elements in `stream` from last to first.
   - `reverse("abcde")` = `"edcba"`

`sort(comparator)(stream)` - sorts elements in `stream` in order defined by `comparator`.
   - `sort(moreThan)("1928374650")` = `"0123456789"`

 `maybeAt(index)(stream)` - returns element at `index` position. First element in `stream` has `index` = `0`. Last element has `index` = n-1, where n is `length(stream)`. If `index` is within that range, an instance of `something` is returned. Otherwise an instance of `nothing` is returned.
   - `maybeAt(0)("abcde")` = `something(97)`
   - `maybeAt(4)("abcde")` = `something(101)`
   - `maybeAt(5)("abcde")` = `nothing`
   - `maybeAt(-1)("abcde")` = `nothing`
